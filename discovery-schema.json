{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Well-Known Resources Discovery",
  "description": "JSON Schema for well-known resource discovery",
  "type": "object",
  "required": ["name", "description", "version", "updated", "resources"],
  "properties": {
    "$id": {
      "type": "string",
      "description": "Schema SAID"
    },
    "name": {
      "type": "string",
      "description": "Display name for the well-known resources"
    },
    "description": {
      "type": "string",
      "description": "Description of the well-known resources"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Semantic version of the discovery format"
    },
    "updated": {
      "type": "string",
      "format": "date",
      "description": "Last update date in YYYY-MM-DD format"
    },
    "resources": {
      "type": "object",
      "description": "Available resource types",
      "properties": {
        "aid": {
          "type": "object",
          "description": "KERI identifiers and related resources",
          "properties": {
            "name": {
              "type": "string",
              "description": "Resource type name"
            },
            "description": {
              "type": "string",
              "description": "Resource type description"
            },
            "aids": {
              "type": "object",
              "description": "KERI identifiers",
              "patternProperties": {
                "^E[A-Za-z0-9_-]{43}$": {
                  "type": "object",
                  "description": "KERI identifier entry",
                  "properties": {
                    "name": {
                      "type": "string",
                      "description": "Human-readable name for the identifier"
                    },
                    "oobi": {
                      "type": "string",
                      "pattern": "^/keri/oobi/E[A-Za-z0-9_-]{43}/index\\.json$",
                      "description": "Path to the OOBI for this identifier"
                    }
                  },
                  "required": ["name", "oobi"],
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            }
          },
          "required": ["name", "description", "aids"],
          "additionalProperties": false
        },
        "schema": {
          "type": "object",
          "description": "vLEI credential schema definitions",
          "properties": {
            "name": {
              "type": "string",
              "description": "Resource type name"
            },
            "description": {
              "type": "string",
              "description": "Resource type description"
            },
            "$id": {
              "type": "string",
              "description": "Schema resource identifier"
            },
            "schemas": {
              "type": "object",
              "description": "Available schemas",
              "patternProperties": {
                "^E[A-Za-z0-9_-]{43}$": {
                  "type": "object",
                  "description": "Schema definition entry",
                  "properties": {
                    "title": {
                      "type": "string",
                      "description": "Human-readable schema title"
                    },
                    "type": {
                      "type": "string",
                      "description": "Schema credential type"
                    },
                    "version": {
                      "type": "string",
                      "description": "Schema version"
                    },
                    "oobi": {
                      "type": "string",
                      "pattern": "^/schema/oobi/E[A-Za-z0-9_-]{43}/index\\.json$",
                      "description": "Path to the schema OOBI"
                    }
                  },
                  "required": ["title", "type", "version", "oobi"],
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            }
          },
          "required": ["name", "description", "schemas"],
          "additionalProperties": false
        },
        "witness": {
          "type": "object",
          "description": "KERI witness identifiers and their OOBIs",
          "properties": {
            "name": {
              "type": "string",
              "description": "Resource type name"
            },
            "description": {
              "type": "string",
              "description": "Resource type description"
            },
            "$id": {
              "type": "string",
              "description": "Witness resource identifier"
            },
            "witnesses": {
              "type": "object",
              "description": "Available witnesses",
              "patternProperties": {
                "^B[A-Za-z0-9_-]{43}$": {
                  "type": "object",
                  "description": "Witness OOBI entry",
                  "properties": {
                    "oobi": {
                      "type": "string",
                      "pattern": "^/witness/oobi/B[A-Za-z0-9_-]{43}/index\\.json$",
                      "description": "Path to the witness OOBI"
                    }
                  },
                  "required": ["oobi"],
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            }
          },
          "required": ["name", "description", "witnesses"],
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "metadata": {
      "type": "object",
      "description": "Additional metadata about the resources",
      "properties": {
        "$id": {
          "type": "string",
          "description": "Metadata identifier"
        },
        "organization": {
          "type": "string",
          "description": "Organization providing these resources"
        },
        "contact": {
          "type": "string",
          "format": "uri",
          "description": "Contact URL for the organization"
        },
        "documentation": {
          "type": "string",
          "format": "uri",
          "description": "Documentation URL"
        }
      },
      "required": ["organization", "contact", "documentation"],
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}